warning: in the working copy of 'Core/Inc/mbedtls_config.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Core/Inc/wizchip_init.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Core/Src/sysmem.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Core/Src/wizchip_init.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/.gitattributes', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Application/Application.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Application/loopback/loopback.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Application/loopback/loopback.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Application/multicast/multicast.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Application/multicast/multicast.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Ethernet/W5500/w5500.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Ethernet/W5500/w5500.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Ethernet/socket.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Ethernet/socket.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Ethernet/wizchip_conf.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Ethernet/wizchip_conf.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/AAC/AddressAutoConfig.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/AAC/AddressAutoConfig.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/DHCP/dhcp.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/DHCP/dhcp.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/DHCP6/dhcpv6.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/DHCP6/dhcpv6.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/DNS/dns.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/DNS/dns.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTClient.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTClient.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTConnect.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTConnectClient.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTConnectServer.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTDeserializePublish.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTFormat.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTFormat.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTPacket.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTPacket.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTPublish.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTSerializePublish.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTSubscribe.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTSubscribeClient.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTSubscribeServer.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTUnsubscribe.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTUnsubscribeClient.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/MQTTUnsubscribeServer.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/MQTTPacket/src/StackTrace.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/mqtt_interface.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/MQTT/mqtt_interface.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/SNMP/snmp.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/SNMP/snmp.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/SNMP/snmp_custom.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/SNMP/snmp_custom.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/SNMP/tools/OID_Converter/Readme.txt', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/Internet/SNMP/tools/net-snmp-5.7(win32-bin)/snmptrapd.conf', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/README.md', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/ioLibrary_Driver-master/license.txt', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/CMakeLists.txt', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/aes.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/aria.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/asn1.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/asn1write.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/base64.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/bignum.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/block_cipher.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/build_info.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/camellia.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ccm.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/chacha20.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/chachapoly.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/check_config.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/cipher.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/cmac.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/compat-2.x.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/config_adjust_legacy_crypto.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/config_adjust_legacy_from_psa.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/config_adjust_psa_from_legacy.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/config_adjust_psa_superset_legacy.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/config_adjust_ssl.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/config_adjust_x509.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/config_psa.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/constant_time.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ctr_drbg.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/debug.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/des.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/dhm.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ecdh.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ecdsa.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ecjpake.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ecp.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/entropy.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/error.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/gcm.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/hkdf.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/hmac_drbg.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/lms.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/mbedtls_config.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/md.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/md5.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/memory_buffer_alloc.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/net_sockets.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/nist_kw.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/oid.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/pem.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/pk.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/pkcs12.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/pkcs5.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/pkcs7.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/platform.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/platform_time.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/platform_util.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/poly1305.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/private_access.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/psa_util.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ripemd160.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/rsa.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/sha1.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/sha256.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/sha3.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/sha512.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ssl.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ssl_cache.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ssl_ciphersuites.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ssl_cookie.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/ssl_ticket.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/threading.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/timing.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/version.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/x509.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/x509_crl.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/x509_crt.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/mbedtls/x509_csr.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/build_info.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_adjust_auto_enabled.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_adjust_config_dependencies.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_adjust_config_key_pair_types.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_adjust_config_synonyms.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_builtin_composites.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_builtin_key_derivation.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_builtin_primitives.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_compat.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_config.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_driver_common.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_driver_contexts_composites.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_driver_contexts_key_derivation.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_driver_contexts_primitives.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_extra.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_legacy.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_platform.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_se_driver.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_sizes.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_struct.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_types.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/include/psa/crypto_values.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/CMakeLists.txt', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/Makefile', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/aes.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/aesce.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/aesce.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/aesni.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/aesni.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/alignment.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/aria.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/asn1parse.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/asn1write.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/base64.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/base64_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_core.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_core.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_core_invasive.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_mod.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_mod.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_mod_raw.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_mod_raw.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bignum_mod_raw_invasive.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/block_cipher.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/block_cipher_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/bn_mul.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/camellia.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ccm.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/chacha20.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/chachapoly.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/check_crypto_config.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/cipher.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/cipher_invasive.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/cipher_wrap.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/cipher_wrap.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/cmac.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/common.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/constant_time.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/constant_time_impl.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/constant_time_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ctr.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ctr_drbg.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/debug.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/debug_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/des.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/dhm.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ecdh.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ecdsa.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ecjpake.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ecp.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ecp_curves.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ecp_curves_new.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ecp_internal_alt.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ecp_invasive.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/entropy.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/entropy_poll.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/entropy_poll.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/error.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/gcm.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/hkdf.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/hmac_drbg.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/lmots.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/lmots.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/lms.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/md.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/md5.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/md_psa.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/md_wrap.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/memory_buffer_alloc.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/mps_common.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/mps_error.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/mps_reader.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/mps_reader.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/mps_trace.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/mps_trace.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/net_sockets.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/nist_kw.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/oid.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/padlock.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/padlock.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pem.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pk.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pk_ecc.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pk_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pk_wrap.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pk_wrap.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pkcs12.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pkcs5.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pkcs7.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pkparse.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pkwrite.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/pkwrite.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/platform.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/platform_util.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/poly1305.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_aead.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_aead.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_cipher.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_cipher.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_client.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_core.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_core_common.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_driver_wrappers.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_driver_wrappers_no_static.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_driver_wrappers_no_static.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_ecp.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_ecp.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_ffdh.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_ffdh.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_hash.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_hash.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_invasive.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_its.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_mac.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_mac.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_pake.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_pake.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_random_impl.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_rsa.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_rsa.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_se.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_se.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_slot_management.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_slot_management.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_storage.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_crypto_storage.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_its_file.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_util.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/psa_util_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ripemd160.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/rsa.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/rsa_alt_helpers.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/rsa_alt_helpers.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/rsa_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/sha1.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/sha256.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/sha3.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/sha512.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_cache.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_ciphersuites.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_ciphersuites_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_client.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_client.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_cookie.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_debug_helpers.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_debug_helpers_generated.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_misc.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_msg.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_ticket.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls12_client.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls12_server.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls13_client.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls13_generic.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls13_invasive.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls13_keys.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls13_keys.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/ssl_tls13_server.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/threading.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/threading_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/timing.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/version.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/version_features.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509_create.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509_crl.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509_crt.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509_csr.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509_internal.h', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509write.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509write_crt.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'Middlewares/Third_Party/mbedTLS/library/x509write_csr.c', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'STM32F407VETX_FLASH.ld', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'STM32F407VETX_RAM.ld', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/Core/Inc/config.hpp b/Core/Inc/config.hpp[m
[1mindex bd08c4a..d417877 100644[m
[1m--- a/Core/Inc/config.hpp[m
[1m+++ b/Core/Inc/config.hpp[m
[36m@@ -1,9 +1,9 @@[m
 /**[m
  * ================================================================[m
[31m- * @file    config.hpp[m
[31m- * @brief   –í—Å–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞.[m
[31m- *          –ò—Å–ø–æ–ª—å–∑—É–µ–º constexpr –≤–º–µ—Å—Ç–æ #define –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ ‚Äî[m
[31m- *          —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ —É–¥–æ–±–Ω–µ–µ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ.[m
[32m+[m[32m * @file config.hpp[m
[32m+[m[32m * @brief –í—Å–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞.[m
[32m+[m[32m * –ò—Å–ø–æ–ª—å–∑—É–µ–º constexpr –≤–º–µ—Å—Ç–æ #define –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ ‚Äî[m
[32m+[m[32m * —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ —É–¥–æ–±–Ω–µ–µ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ.[m
  * ================================================================[m
  */[m
 #ifndef CONFIG_HPP[m
[36m@@ -12,48 +12,46 @@[m
 #include "stm32f4xx_hal.h"[m
 [m
 #ifdef __cplusplus[m
[31m-  #include <cstdint>[m
[31m-  #include <cstring>[m
[32m+[m[32m#include <cstdint>[m
[32m+[m[32m#include <cstring>[m
 #else[m
[31m-  #include <stdint.h>[m
[31m-  #include <string.h>[m
[32m+[m[32m#include <stdint.h>[m
[32m+[m[32m#include <string.h>[m
 #endif[m
 [m
 namespace Config {[m
 [m
 /* ================================================================[m
[31m- *  –ü–∏–Ω—ã (–æ—Å—Ç–∞–≤–ª—è–µ–º #define ‚Äî –Ω—É–∂–Ω—ã –¥–ª—è HAL –º–∞–∫—Ä–æ—Å–æ–≤)[m
[32m+[m[32m * –ü–∏–Ω—ã (–æ—Å—Ç–∞–≤–ª—è–µ–º #define ‚Äî –Ω—É–∂–Ω—ã –¥–ª—è HAL –º–∞–∫—Ä–æ—Å–æ–≤)[m
  * ================================================================ */[m
 [m
 /* –°–≤–µ—Ç–æ–¥–∏–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ (DO) ‚Äî –º–∏–≥–∞–µ—Ç –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏, –≥–æ—Ä–∏—Ç –≤ DEBUG */[m
[31m-#define PIN_LED_PORT          GPIOC[m
[31m-#define PIN_LED_PIN           GPIO_PIN_1[m
[32m+[m[32m#define PIN_LED_PORT GPIOC[m
[32m+[m[32m#define PIN_LED_PIN  GPIO_PIN_1[m
 [m
 /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ (DI —Å –ø–æ–¥—Ç—è–∂–∫–æ–π –∫ VCC)[m
  * –ó–∞–º–∫–Ω—É—Ç –Ω–∞ GND ‚Üí SLEEP MODE[m
[31m- * –†–∞–∑–æ–º–∫–Ω—É—Ç      ‚Üí DEBUG MODE */[m
[31m-#define PIN_MODE_SW_PORT      GPIOC[m
[31m-#define PIN_MODE_SW_PIN       GPIO_PIN_0[m
[32m+[m[32m * –†–∞–∑–æ–º–∫–Ω—É—Ç ‚Üí DEBUG MODE */[m
[32m+[m[32m#define PIN_MODE_SW_PORT GPIOC[m
[32m+[m[32m#define PIN_MODE_SW_PIN  GPIO_PIN_0[m
 [m
 /* RS-485 —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä DE/RE (–æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã) */[m
[31m-#define PIN_RS485_DE_PORT     GPIOB[m
[31m-#define PIN_RS485_DE_PIN      GPIO_PIN_12[m
[32m+[m[32m#define PIN_RS485_DE_PORT GPIOB[m
[32m+[m[32m#define PIN_RS485_DE_PIN  GPIO_PIN_12[m
 [m
 /* SIM800L –ø–∏—Ç–∞–Ω–∏–µ —á–µ—Ä–µ–∑ N-MOSFET */[m
[31m-#define PIN_SIM_PWR_PORT      GPIOC[m
[31m-#define PIN_SIM_PWR_PIN       GPIO_PIN_2[m
[32m+[m[32m#define PIN_SIM_PWR_PORT GPIOC[m
[32m+[m[32m#define PIN_SIM_PWR_PIN  GPIO_PIN_2[m
 [m
[31m-/* SD Card Chip Select */[m
[31m-#define PIN_SD_CS_PORT        GPIOA[m
[31m-#define PIN_SD_CS_PIN         GPIO_PIN_4[m
[31m-[m
[31m-// --- W5500 pins (–æ—Å—Ç–∞–≤–ª—è–µ–º #define –∫–∞–∫ —É –≤–∞—Å –¥–ª—è HAL) ---[m
[31m-#define PIN_W5500_CS_PORT GPIOA[m
[31m-#define PIN_W5500_CS_PIN  GPIO_PIN_8[m
[32m+[m[32m/* SD Card Chip Select (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å SPI-—Ä–µ–∂–∏–º SD) */[m
[32m+[m[32m#define PIN_SD_CS_PORT GPIOA[m
[32m+[m[32m#define PIN_SD_CS_PIN  GPIO_PIN_4[m
 [m
[32m+[m[32m// --- W5500 pins ---[m
[32m+[m[32m#define PIN_W5500_CS_PORT  GPIOA[m
[32m+[m[32m#define PIN_W5500_CS_PIN   GPIO_PIN_8[m
 #define PIN_W5500_RST_PORT GPIOC[m
 #define PIN_W5500_RST_PIN  GPIO_PIN_3[m
[31m-[m
 #define PIN_W5500_INT_PORT GPIOC[m
 #define PIN_W5500_INT_PIN  GPIO_PIN_4[m
 [m
[36m@@ -63,79 +61,85 @@[m [mnamespace Config {[m
 #define PIN_NET_SW_PORT GPIOB[m
 #define PIN_NET_SW_PIN  GPIO_PIN_0[m
 [m
[31m-// MAC (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤ –≤–∞—à–µ–π —Å–µ—Ç–∏)[m
[32m+[m[32m/* ================================================================[m
[32m+[m[32m * W5500 —Å–µ—Ç—å[m
[32m+[m[32m * ================================================================ */[m
 constexpr uint8_t W5500_MAC[6] = {0x02,0x30,0x05,0x00,0x00,0x01};[m
 [m
 enum class NetMode : uint8_t { DHCP = 0, Static = 1 };[m
 constexpr NetMode NET_MODE = NetMode::DHCP;[m
 [m
 // Static IPv4 (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ NET_MODE==Static)[m
[31m-constexpr uint8_t NET_IP[4]   = {192,168,31,122};[m
[31m-constexpr uint8_t NET_SN[4]   = {255,255,255,0};[m
[31m-constexpr uint8_t NET_GW[4]   = {192,168,31,1};[m
[31m-constexpr uint8_t NET_DNS[4]  = {8,8,8,8};[m
[32m+[m[32mconstexpr uint8_t NET_IP[4]  = {192,168,31,122};[m
[32m+[m[32mconstexpr uint8_t NET_SN[4]  = {255,255,255,0};[m
[32m+[m[32mconstexpr uint8_t NET_GW[4]  = {192,168,31,1};[m
[32m+[m[32mconstexpr uint8_t NET_DNS[4] = {8,8,8,8};[m
 [m
 constexpr uint32_t W5500_DHCP_TIMEOUT_MS = 8000;[m
[32m+[m
 /* ================================================================[m
[31m- *  DS3231 RTC[m
[32m+[m[32m * DS3231 RTC[m
  * ================================================================ */[m
[31m-constexpr uint8_t  DS3231_ADDR       = 0x68 << 1;  // –°–¥–≤–∏–Ω—É—Ç –¥–ª—è HAL[m
[32m+[m[32mconstexpr uint8_t DS3231_ADDR = 0x68 << 1; // –°–¥–≤–∏–Ω—É—Ç –¥–ª—è HAL[m
 [m
 /* ================================================================[m
[31m- *  Modbus –¥–∞—Ç—á–∏–∫ (RS-485)[m
[32m+[m[32m * Modbus –¥–∞—Ç—á–∏–∫ (RS-485)[m
  * ================================================================ */[m
 constexpr uint8_t  MODBUS_SLAVE      = 1;[m
[31m-constexpr uint8_t  MODBUS_FUNC_CODE  = 4;       // FC03 Holding Registers[m
[32m+[m[32mconstexpr uint8_t  MODBUS_FUNC_CODE  = 4;    // FC04 Input Registers[m
 constexpr uint16_t MODBUS_START_REG  = 0;[m
 constexpr uint16_t MODBUS_NUM_REGS   = 2;[m
[31m-constexpr float    SENSOR_ZERO_LEVEL = 0.0f;    // –ù—É–ª–µ–≤–∞—è –æ—Ç–º–µ—Ç–∫–∞ (–º)[m
[31m-constexpr float    SENSOR_DIVIDER    = 1000.0f;  // –î–µ–ª–∏—Ç–µ–ª—å[m
[32m+[m
[32m+[m[32mconstexpr float SENSOR_ZERO_LEVEL = 0.0f;    // –ù—É–ª–µ–≤–∞—è –æ—Ç–º–µ—Ç–∫–∞ (–º)[m
[32m+[m[32mconstexpr float SENSOR_DIVIDER    = 1000.0f; // –î–µ–ª–∏—Ç–µ–ª—å[m
 [m
 /* ================================================================[m
[31m- *  UUID-—ã (–¥–ª—è JSON)[m
[32m+[m[32m * UUID-—ã (–¥–ª—è JSON)[m
  * ================================================================ */[m
 constexpr const char* METRIC_ID  =[m
[31m-    "f2656f53-463c-4d66-8ab1-e86fb11549b1";[m
[32m+[m[32m  "f2656f53-463c-4d66-8ab1-e86fb11549b1";[m
 constexpr const char* COMPLEX_ID =[m
[31m-    "21100e69-b08b-45d1-ab1f-0adca0f0f909";[m
[32m+[m[32m  "21100e69-b08b-45d1-ab1f-0adca0f0f909";[m
 [m
 /* ================================================================[m
[31m- *  GSM / SIM800L[m
[32m+[m[32m * GSM / SIM800L[m
  * ================================================================ */[m
[31m-constexpr const char* GSM_APN       = "internet";[m
[31m-constexpr const char* GSM_APN_USER  = "";[m
[31m-constexpr const char* GSM_APN_PASS  = "";[m
[31m-constexpr const char* SERVER_URL    =[m
[31m-    "https://thingsboard.cloud/api/v1/6Wv356bm51LxD2vrF22S/telemetry";[m
[31m-constexpr const char* SERVER_AUTH   =[m
[31m-    "";  // Base64[m
[32m+[m[32mconstexpr const char* GSM_APN      = "internet";[m
[32m+[m[32mconstexpr const char* GSM_APN_USER = "";[m
[32m+[m[32mconstexpr const char* GSM_APN_PASS = "";[m
[32m+[m
[32m+[m[32mconstexpr const char* SERVER_URL =[m
[32m+[m[32m  "https://thingsboard.cloud/api/v1/6Wv356bm51LxD2vrF22S/telemetry";[m
[32m+[m
[32m+[m[32m// –ï—Å–ª–∏ –Ω—É–∂–µ–Ω Basic Auth –¥–ª—è httpPostPlainW5500(): —Å—é–¥–∞ Base64("user:pass")[m
[32m+[m[32mconstexpr const char* SERVER_AUTH = "";[m
 [m
 /* ================================================================[m
[31m- *  –¢–∞–π–º–∏–Ω–≥–∏[m
[32m+[m[32m * –¢–∞–π–º–∏–Ω–≥–∏[m
  * ================================================================ */[m
[31m-constexpr uint32_t POLL_INTERVAL_SEC     = 60;    // –û–ø—Ä–æ—Å –¥–∞—Ç—á–∏–∫–∞[m
[31m-constexpr uint32_t SEND_INTERVAL_POLLS   = 60;    // 60√ó60—Å = 1 —á–∞—Å[m
[31m-constexpr uint32_t MODBUS_TIMEOUT_MS     = 1000;[m
[31m-constexpr uint32_t SIM800_CMD_TIMEOUT_MS = 5000;[m
[31m-constexpr uint32_t SIM800_HTTP_TIMEOUT   = 30000;[m
[31m-constexpr uint32_t SIM800_BOOT_MS        = 4000;[m
[32m+[m[32mconstexpr uint32_t POLL_INTERVAL_SEC      = 5;   // –û–ø—Ä–æ—Å –¥–∞—Ç—á–∏–∫–∞[m
[32m+[m[32mconstexpr uint32_t SEND_INTERVAL_POLLS    = 2;   // 60√ó60—Å = 1 —á–∞—Å (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å)[m
[32m+[m[32mconstexpr uint32_t MODBUS_TIMEOUT_MS      = 1000;[m
[32m+[m[32mconstexpr uint32_t SIM800_CMD_TIMEOUT_MS  = 5000;[m
[32m+[m[32mconstexpr uint32_t SIM800_HTTP_TIMEOUT    = 30000;[m
[32m+[m[32mconstexpr uint32_t SIM800_BOOT_MS         = 4000;[m
 [m
 /* ================================================================[m
[31m- *  –ë—É—Ñ–µ—Ä—ã[m
[32m+[m[32m * –ë—É—Ñ–µ—Ä—ã[m
  * ================================================================ */[m
[31m-constexpr uint8_t  MEAS_BUFFER_SIZE   = 64;[m
[31m-constexpr uint16_t JSON_BUFFER_SIZE   = 8192;[m
[31m-constexpr uint16_t GSM_RX_BUF_SIZE   = 512;[m
[32m+[m[32mconstexpr uint8_t  MEAS_BUFFER_SIZE = 64;[m
[32m+[m[32mconstexpr uint16_t JSON_BUFFER_SIZE = 8192;[m
[32m+[m[32mconstexpr uint16_t GSM_RX_BUF_SIZE  = 512;[m
 [m
 /* ================================================================[m
[31m- *  SD-–∫–∞—Ä—Ç–∞[m
[32m+[m[32m * SD-–∫–∞—Ä—Ç–∞[m
  * ================================================================ */[m
 constexpr const char* BACKUP_FILENAME = "backup.json";[m
 // –º–∞–∫—Å–∏–º—É–º –¥–ª–∏–Ω—ã –æ–¥–Ω–æ–π JSONL-—Å—Ç—Ä–æ–∫–∏ (–±–µ–∑ \r\n)[m
 constexpr uint16_t JSONL_LINE_MAX = 240;[m
[31m-[m
 // –º–∞–∫—Å–∏–º—É–º –±–∞–π—Ç –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –≤ –æ–¥–Ω–æ–º HTTP POST (<= JSON_BUFFER_SIZE)[m
 constexpr uint16_t HTTP_CHUNK_MAX = 1800;[m
[31m-}  // namespace Config[m
[32m+[m
[32m+[m[32m} // namespace Config[m
 [m
 #endif /* CONFIG_HPP */[m
[1mdiff --git a/Core/Src/app.cpp b/Core/Src/app.cpp[m
[1mindex 83a4c64..17092ca 100644[m
[1m--- a/Core/Src/app.cpp[m
[1m+++ b/Core/Src/app.cpp[m
[36m@@ -6,15 +6,21 @@[m
  */[m
 #include "app.hpp"[m
 [m
[31m-#include "spi.h"           // hspi1[m
[31m-#include "w5500_net.hpp"   // –≤–∞—à –∫–ª–∞—Å—Å W5500Net[m
[31m-#include "https_w5500.hpp" // HttpsW5500::postJson(...)[m
[32m+[m[32m#include "w5500_net.hpp"[m
[32m+[m[32m#include "https_w5500.hpp"[m
 [m
 #include <cctype>[m
 #include <cstring>[m
 #include <cstdio>[m
 [m
 extern "C" {[m
[32m+[m[32m  // HAL handles (cube *.h —É–¥–∞–ª–µ–Ω—ã ‚Äî –æ–±—ä—è–≤–ª—è–µ–º –Ω–∞–ø—Ä—è–º—É—é)[m
[32m+[m[32m  extern I2C_HandleTypeDef  hi2c1;[m
[32m+[m[32m  extern UART_HandleTypeDef huart2;[m
[32m+[m[32m  extern UART_HandleTypeDef huart3;[m
[32m+[m[32m  extern SPI_HandleTypeDef  hspi1;[m
[32m+[m[32m  extern RTC_HandleTypeDef  hrtc;[m
[32m+[m
 #include "socket.h"[m
 #include "dns.h"[m
 #include "w5500.h"[m
[36m@@ -24,29 +30,66 @@[m [mextern "C" {[m
 // -------------------- ETH object --------------------[m
 static W5500Net eth;[m
 [m
[31m-// –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω–∫–∞ PHY (–≤–º–µ—Å—Ç–æ eth.linkUp())[m
[31m-static bool ethLinkUp()[m
[31m-{[m
[31m-  return (wizphy_getphylink() == PHY_LINK_ON);[m
[31m-}[m
[31m-[m
 // -------------------- –ö–∞–Ω–∞–ª —Å–≤—è–∑–∏ --------------------[m
 enum class LinkChannel : uint8_t { Gsm = 0, Eth = 1 };[m
 [m
[31m-// NET_SELECT: –ø–æ–¥—Ç—è–∂–∫–∞ –≤–≤–µ—Ä—Ö[m
[31m-// PB0=1 (—Ä–∞–∑–æ–º–∫–Ω—É—Ç) -> GSM[m
[31m-// PB0=0 (–∑–∞–º–∫–Ω—É—Ç –Ω–∞ GND) -> ETH[m
[31m-static LinkChannel readChannel() {[m
[32m+[m[32m// PB0=1 -> GSM, PB0=0 -> ETH[m
[32m+[m[32mstatic LinkChannel readChannel()[m
[32m+[m[32m{[m
   GPIO_PinState pin = HAL_GPIO_ReadPin(PIN_NET_SW_PORT, PIN_NET_SW_PIN);[m
   return (pin == GPIO_PIN_RESET) ? LinkChannel::Eth : LinkChannel::Gsm;[m
 }[m
 [m
[31m-static bool startsWith(const char* s, const char* prefix) {[m
[32m+[m[32mstatic const char* chStr(LinkChannel ch)[m
[32m+[m[32m{[m
[32m+[m[32m  return (ch == LinkChannel::Eth) ? "ETH(W5500)" : "GSM(SIM800L)";[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mstatic void logNetSelect(const char* tag)[m
[32m+[m[32m{[m
[32m+[m[32m  GPIO_PinState pin = HAL_GPIO_ReadPin(PIN_NET_SW_PORT, PIN_NET_SW_PIN);[m
[32m+[m[32m  LinkChannel ch = readChannel();[m
[32m+[m[32m  DBG.info("[%s] NET_SELECT PB0=%d => %s", tag, (int)pin, chStr(ch));[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mstatic bool startsWith(const char* s, const char* prefix)[m
[32m+[m[32m{[m
   if (!s || !prefix) return false;[m
   size_t n = std::strlen(prefix);[m
   return (std::strncmp(s, prefix, n) == 0);[m
 }[m
 [m
[32m+[m[32m// ============================================================================[m
[32m+[m[32m// ETH: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ init -> link[m
[32m+[m[32m// ============================================================================[m
[32m+[m
[32m+[m[32m// PHY link —á–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑ ctlwizchip, –Ω–æ —Ç–æ–ª—å–∫–æ –ü–û–°–õ–ï eth.init()[m
[32m+[m[32mstatic bool ethLinkUpAfterInit()[m
[32m+[m[32m{[m
[32m+[m[32m  uint8_t link = 0;[m
[32m+[m[32m  ctlwizchip(CW_GET_PHYLINK, (void*)&link);[m
[32m+[m[32m  return (link != 0);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç init W5500 –∏ –∑–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç PHY link[m
[32m+[m[32mstatic bool ensureEthReadyAndLinkUp()[m
[32m+[m[32m{[m
[32m+[m[32m  if (!eth.ready()) {[m
[32m+[m[32m    DBG.info("ETH: init...");[m
[32m+[m[32m    if (!eth.init(&hspi1, Config::W5500_DHCP_TIMEOUT_MS)) {[m
[32m+[m[32m      DBG.error("ETH: init failed");[m
[32m+[m[32m      return false;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (!ethLinkUpAfterInit()) {[m
[32m+[m[32m    DBG.error("ETH: link DOWN");[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return true;[m
[32m+[m[32m}[m
[32m+[m
 // -------------------- HTTP (plain) over W5500 --------------------[m
 struct UrlParts {[m
   char host[64]{};[m
[36m@@ -54,7 +97,8 @@[m [mstruct UrlParts {[m
   uint16_t port = 80;[m
 };[m
 [m
[31m-static bool isIpv4Literal(const char* s) {[m
[32m+[m[32mstatic bool isIpv4Literal(const char* s)[m
[32m+[m[32m{[m
   if (!s || !*s) return false;[m
   for (const char* p = s; *p; ++p) {[m
     if (!std::isdigit((unsigned char)*p) && *p != '.') return false;[m
[36m@@ -62,10 +106,10 @@[m [mstatic bool isIpv4Literal(const char* s) {[m
   return true;[m
 }[m
 [m
[31m-static bool parseHttpUrl(const char* url, UrlParts& out) {[m
[32m+[m[32mstatic bool parseHttpUrl(const char* url, UrlParts& out)[m
[32m+[m[32m{[m
   if (!url) return false;[m
 [m
[31m-  // –ë—ã–ª–æ: memset(&out,0,sizeof(out)) -> –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–ª—è –Ω–µ-trivial —Ç–∏–ø–∞[m
   out = UrlParts{};[m
   out.port = 80;[m
 [m
[36m@@ -101,7 +145,8 @@[m [mstatic bool parseHttpUrl(const char* url, UrlParts& out) {[m
   return true;[m
 }[m
 [m
[31m-static bool resolveHost(const char* host, uint8_t outIp[4]) {[m
[32m+[m[32mstatic bool resolveHost(const char* host, uint8_t outIp[4])[m
[32m+[m[32m{[m
   if (isIpv4Literal(host)) {[m
     uint32_t a=0,b=0,c=0,d=0;[m
     if (std::sscanf(host, "%lu.%lu.%lu.%lu", &a,&b,&c,&d) != 4) return false;[m
[36m@@ -125,17 +170,18 @@[m [mstatic bool resolveHost(const char* host, uint8_t outIp[4]) {[m
 }[m
 [m
 static int httpPostPlainW5500(const char* url,[m
[31m-                              const char* authBasicB64,[m
[31m-                              const char* json,[m
[31m-                              uint16_t len,[m
[31m-                              uint32_t timeoutMs) {[m
[32m+[m[32m                             const char* authBasicB64,[m
[32m+[m[32m                             const char* json,[m
[32m+[m[32m                             uint16_t len,[m
[32m+[m[32m                             uint32_t timeoutMs)[m
[32m+[m[32m{[m
   UrlParts u{};[m
   if (!parseHttpUrl(url, u)) return -10;[m
 [m
   uint8_t dstIp[4]{};[m
   if (!resolveHost(u.host, dstIp)) return -11;[m
 [m
[31m-  const uint8_t sn = 0;[m
[32m+[m[32m  const uint8_t  sn = 0;[m
   const uint16_t localPort = 50000;[m
 [m
   int8_t s = socket(sn, Sn_MR_TCP, localPort, 0);[m
[36m@@ -185,7 +231,7 @@[m [mstatic int httpPostPlainW5500(const char* url,[m
   };[m
 [m
   if (sendAll((const uint8_t*)hdr, (uint32_t)hdrLen) != 0) { close(sn); return -23; }[m
[31m-  if (sendAll((const uint8_t*)json, (uint32_t)len) != 0) { close(sn); return -24; }[m
[32m+[m[32m  if (sendAll((const uint8_t*)json, (uint32_t)len) != 0)    { close(sn); return -24; }[m
 [m
   uint32_t t0 = HAL_GetTick();[m
   static char rx[768];[m
[36m@@ -219,76 +265,90 @@[m [mstatic int httpPostPlainW5500(const char* url,[m
 [m
 // =================================================================[m
 [m
[31m-/* ========= –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ========= */[m
 App::App()[m
[31m-  : m_rtc(&hi2c1),[m
[31m-    m_modbus(&huart3, PIN_RS485_DE_PORT, PIN_RS485_DE_PIN),[m
[31m-    m_gsm(&huart2, PIN_SIM_PWR_PORT, PIN_SIM_PWR_PIN),[m
[31m-    m_sdBackup(),[m
[31m-    m_sensor(m_modbus, m_rtc),[m
[31m-    m_buffer(),[m
[31m-    m_power(&hrtc, m_sdBackup)[m
[32m+[m[32m: m_rtc(&hi2c1),[m
[32m+[m[32m  m_modbus(&huart3, PIN_RS485_DE_PORT, PIN_RS485_DE_PIN),[m
[32m+[m[32m  m_gsm(&huart2, PIN_SIM_PWR_PORT, PIN_SIM_PWR_PIN),[m
[32m+[m[32m  m_sdBackup(),[m
[32m+[m[32m  m_sensor(m_modbus, m_rtc),[m
[32m+[m[32m  m_buffer(),[m
[32m+[m[32m  m_power(&hrtc, m_sdBackup)[m
 {[m
 }[m
 [m
[31m-/* ========= –ß—Ç–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ ========= */[m
[31m-SystemMode App::readMode() {[m
[32m+[m[32mSystemMode App::readMode()[m
[32m+[m[32m{[m
   auto pin = HAL_GPIO_ReadPin(PIN_MODE_SW_PORT, PIN_MODE_SW_PIN);[m
   return (pin == GPIO_PIN_SET) ? SystemMode::Debug : SystemMode::Sleep;[m
 }[m
 [m
[31m-/* ========= LED ========= */[m
 void App::ledOn()  { HAL_GPIO_WritePin(PIN_LED_PORT, PIN_LED_PIN, GPIO_PIN_SET); }[m
 void App::ledOff() { HAL_GPIO_WritePin(PIN_LED_PORT, PIN_LED_PIN, GPIO_PIN_RESET); }[m
[31m-void App::ledBlink(uint8_t count, uint32_t ms) {[m
[32m+[m
[32m+[m[32mvoid App::ledBlink(uint8_t count, uint32_t ms)[m
[32m+[m[32m{[m
   for (uint8_t i = 0; i < count; i++) { ledOn(); HAL_Delay(ms); ledOff(); HAL_Delay(ms); }[m
 }[m
 [m
[31m-/* ========= –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ========= */[m
[31m-void App::init() {[m
[32m+[m[32mvoid App::init()[m
[32m+[m[32m{[m
[32m+[m[32m  DBG.info("APP INIT MARK: %s %s", __DATE__, __TIME__);[m
[32m+[m
   m_rtc.init();[m
   m_modbus.init();[m
   m_sdBackup.init();[m
   m_gsm.powerOff();[m
 [m
[31m-  // –ü–æ–¥–Ω–∏–º–µ–º Ethernet –∑–∞—Ä–∞–Ω–µ–µ (DHCP->static fallback –≤–Ω—É—Ç—Ä–∏ W5500Net)[m
[31m-  (void)eth.init(&hspi1, Config::W5500_DHCP_TIMEOUT_MS);[m
[31m-[m
   m_mode = readMode();[m
   DBG.info("Mode: %s", (m_mode == SystemMode::Debug) ? "DEBUG" : "SLEEP");[m
[31m-  DBG.info("Link: %s", (readChannel() == LinkChannel::Eth) ? "ETH(W5500)" : "GSM(SIM800L)");[m
[32m+[m[32m  logNetSelect("INIT");[m
 [m
   if (m_mode == SystemMode::Debug) {[m
     DBG.info(">>> –†–ï–ñ–ò–ú: DEBUG <<<");[m
[31m-    DBG.info("–û–ø—Ä–æ—Å %d —Å–µ–∫, –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–∞—Å—Ç–æ", static_cast<int>(Config::POLL_INTERVAL_SEC));[m
[32m+[m[32m    DBG.info("–û–ø—Ä–æ—Å %d —Å–µ–∫", (int)Config::POLL_INTERVAL_SEC);[m
     ledOn();[m
   } else {[m
     DBG.info(">>> –†–ï–ñ–ò–ú: SLEEP <<<");[m
[31m-    DBG.info("–û–ø—Ä–æ—Å %d —Å–µ–∫, –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—é –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–æ–º",[m
[31m-             static_cast<int>(Config::POLL_INTERVAL_SEC));[m
[32m+[m[32m    DBG.info("–û–ø—Ä–æ—Å %d —Å–µ–∫", (int)Config::POLL_INTERVAL_SEC);[m
     ledBlink(3, 200);[m
   }[m
 }[m
 [m
[31m-/* ========= –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª ========= */[m
[31m-[[noreturn]] void App::run() {[m
[32m+[m[32m[[noreturn]] void App::run()[m
[32m+[m[32m{[m
[32m+[m[32m  bool wokeFromStop = false;[m
[32m+[m[32m  bool firstCycle = true;[m
[32m+[m
   while (true) {[m
[31m-    eth.tick(); // DHCP lease / DNS tick (–µ—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–∏–ª–∏ DNS_time_handler –≤–Ω—É—Ç—Ä—å W5500Net::tick)[m
[32m+[m[32m    if (eth.ready()) {[m
[32m+[m[32m      eth.tick();[m
[32m+[m[32m    }[m
 [m
     m_mode = readMode();[m
 [m
[31m-    DateTime ts;[m
[32m+[m[32m    const bool doSelfTest = firstCycle || wokeFromStop;[m
[32m+[m[32m    const char* tag = firstCycle ? "BOOT" : "WAKE";[m
[32m+[m
[32m+[m[32m    if (doSelfTest) {[m
[32m+[m[32m      DBG.info("========================================================================");[m
[32m+[m[32m      DBG.info("[%s] Self-test: NET_SELECT + Modbus + Server POST", tag);[m
[32m+[m[32m      logNetSelect(tag);[m
[32m+[m[32m      DBG.info("========================================================================");[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // ---- Modbus –æ–ø—Ä–æ—Å ----[m
[32m+[m[32m    DateTime ts{};[m
     float val = m_sensor.read(ts);[m
 [m
[31m-    char timeStr[32];[m
[32m+[m[32m    char timeStr[32]{};[m
     ts.formatISO8601(timeStr);[m
     DBG.data("val=%.3f t=%s", val, timeStr);[m
 [m
     ledBlink(1, 50);[m
 [m
[31m-    // JSONL: –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ = –æ–¥–∏–Ω JSON-–æ–±—ä–µ–∫—Ç[m
[32m+[m[32m    // ---- SD –∂—É—Ä–Ω–∞–ª ----[m
     char line[256];[m
[31m-    int len = std::snprintf([m
[32m+[m[32m    int lenLine = std::snprintf([m
       line, sizeof(line),[m
       "{\"metricId\":\"%s\",\"value\":%.3f,"[m
       "\"measureTime\":\"20%02u-%02u-%02uT%02u:%02u:%02u.000Z\"}",[m
[36m@@ -297,45 +357,99 @@[m [mvoid App::init() {[m
       (unsigned)ts.year, (unsigned)ts.month, (unsigned)ts.date,[m
       (unsigned)ts.hours, (unsigned)ts.minutes, (unsigned)ts.seconds[m
     );[m
[31m-    if (len > 0) m_sdBackup.appendLine(line);[m
[32m+[m[32m    if (lenLine > 0) m_sdBackup.appendLine(line);[m
[32m+[m
[32m+[m[32m    // ---- –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–∞ BOOT/WAKE ----[m
[32m+[m[32m    if (doSelfTest) {[m
[32m+[m[32m      LinkChannel ch = readChannel();[m
[32m+[m
[32m+[m[32m      char j[256];[m
[32m+[m[32m      int len = std::snprintf([m
[32m+[m[32m        j, sizeof(j),[m
[32m+[m[32m        "[{\"metricId\":\"%s\",\"value\":%.3f,"[m
[32m+[m[32m        "\"measureTime\":\"20%02u-%02u-%02uT%02u:%02u:%02u.000Z\"}]",[m
[32m+[m[32m        Config::METRIC_ID,[m
[32m+[m[32m        val,[m
[32m+[m[32m        (unsigned)ts.year, (unsigned)ts.month, (unsigned)ts.date,[m
[32m+[m[32m        (unsigned)ts.hours, (unsigned)ts.minutes, (unsigned)ts.seconds[m
[32m+[m[32m      );[m
[32m+[m
[32m+[m[32m      if (len > 0 && len < (int)sizeof(j)) {[m
[32m+[m[32m        int http = -1;[m
[32m+[m
[32m+[m[32m        if (ch == LinkChannel::Eth) {[m
[32m+[m[32m          if (!ensureEthReadyAndLinkUp()) {[m
[32m+[m[32m            DBG.error("[%s] ETH not ready/link -> POST skipped", tag);[m
[32m+[m[32m          } else {[m
[32m+[m[32m            if (startsWith(Config::SERVER_URL, "https://")) {[m
[32m+[m[32m              http = HttpsW5500::postJson([m
[32m+[m[32m                Config::SERVER_URL,[m
[32m+[m[32m                Config::SERVER_AUTH,[m
[32m+[m[32m                j,[m
[32m+[m[32m                (uint16_t)std::strlen(j),[m
[32m+[m[32m                20000[m
[32m+[m[32m              );[m
[32m+[m[32m              DBG.info("[%s] ETH HTTPS POST code=%d", tag, http);[m
[32m+[m[32m            } else if (startsWith(Config::SERVER_URL, "http://")) {[m
[32m+[m[32m              http = httpPostPlainW5500([m
[32m+[m[32m                Config::SERVER_URL,[m
[32m+[m[32m                Config::SERVER_AUTH,[m
[32m+[m[32m                j,[m
[32m+[m[32m                (uint16_t)std::strlen(j),[m
[32m+[m[32m                15000[m
[32m+[m[32m              );[m
[32m+[m[32m              DBG.info("[%s] ETH HTTP POST code=%d", tag, http);[m
[32m+[m[32m            } else {[m
[32m+[m[32m              DBG.error("[%s] Unsupported SERVER_URL scheme", tag);[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        } else {[m
[32m+[m[32m          m_gsm.powerOn();[m
[32m+[m[32m          if (m_gsm.init() == GsmStatus::Ok) {[m
[32m+[m[32m            http = m_gsm.httpPost(Config::SERVER_URL, j, (uint16_t)std::strlen(j));[m
[32m+[m[32m            DBG.info("[%s] GSM POST code=%d", tag, http);[m
[32m+[m[32m            m_gsm.disconnect();[m
[32m+[m[32m          } else {[m
[32m+[m[32m            DBG.error("[%s] GSM init fail -> POST skipped", tag);[m
[32m+[m[32m          }[m
[32m+[m[32m          m_gsm.powerOff();[m
[32m+[m[32m        }[m
[32m+[m[32m      } else {[m
[32m+[m[32m        DBG.error("[%s] Test JSON build failed", tag);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
 [m
[31m-    // –û—Ç–ø—Ä–∞–≤–∫–∞:[m
[31m-    // - DEBUG: –ø—ã—Ç–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π —Ü–∏–∫–ª[m
[31m-    // - SLEEP: –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è[m
[32m+[m[32m    // ---- –û–±—ã—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∂—É—Ä–Ω–∞–ª–∞ ----[m
     transmitBuffer();[m
 [m
[31m-    // –°–æ–Ω/–æ–∂–∏–¥–∞–Ω–∏–µ[m
[32m+[m[32m    // ---- –°–æ–Ω/–æ–∂–∏–¥–∞–Ω–∏–µ ----[m
     if (m_mode == SystemMode::Sleep) {[m
       DBG.info("Stop Mode %d —Å–µ–∫...", (int)Config::POLL_INTERVAL_SEC);[m
       ledOff();[m
       m_power.enterStopMode(Config::POLL_INTERVAL_SEC);[m
       DBG.info("...–ø—Ä–æ—Å–Ω—É–ª–∏—Å—å!");[m
[32m+[m[32m      wokeFromStop = true;[m
     } else {[m
       DBG.info("–û–∂–∏–¥–∞–Ω–∏–µ %d —Å–µ–∫", (int)Config::POLL_INTERVAL_SEC);[m
       HAL_Delay(Config::POLL_INTERVAL_SEC * 1000UL);[m
[32m+[m[32m      wokeFromStop = false;[m
     }[m
[32m+[m
[32m+[m[32m    firstCycle = false;[m
   }[m
 }[m
 [m
[31m-/* ========= –ü–µ—Ä–µ–¥–∞—á–∞ –±—É—Ñ–µ—Ä–∞ ========= */[m
[31m-void App::transmitBuffer() {[m
[32m+[m[32mvoid App::transmitBuffer()[m
[32m+[m[32m{[m
   LinkChannel ch = readChannel();[m
   DBG.info("======== –û–¢–ü–†–ê–í–ö–ê –ñ–£–†–ù–ê–õ–ê (%s) ========",[m
            (ch == LinkChannel::Eth) ? "ETH" : "GSM");[m
 [m
   if (ch == LinkChannel::Eth) {[m
[31m-    // ETH —Å—Ç—Ä–æ–≥–æ: –Ω–∏–∫–∞–∫–∏—Ö –ø–æ–ø—ã—Ç–æ–∫ GSM, –¥–∞–∂–µ –µ—Å–ª–∏ Ethernet –Ω–µ –ø–æ–¥–Ω—è—Ç[m
[31m-    if (!ethLinkUp()) {[m
[31m-      DBG.error("ETH selected, link DOWN -> skip (no GSM fallback)");[m
[32m+[m[32m    if (!ensureEthReadyAndLinkUp()) {[m
[32m+[m[32m      DBG.error("ETH selected -> skip (no GSM fallback)");[m
       return;[m
     }[m
[31m-    if (!eth.ready()) {[m
[31m-      (void)eth.init(&hspi1, Config::W5500_DHCP_TIMEOUT_MS);[m
[31m-      if (!eth.ready()) {[m
[31m-        DBG.error("ETH selected, init failed -> skip (no GSM fallback)");[m
[31m-        return;[m
[31m-      }[m
[31m-    }[m
 [m
     retransmitBackup();[m
     DBG.info("======== –û–¢–ü–†–ê–í–ö–ê –ñ–£–†–ù–ê–õ–ê –ö–û–ù–ï–¶ ========");[m
[36m@@ -357,9 +471,8 @@[m [mvoid App::transmitBuffer() {[m
   DBG.info("======== –û–¢–ü–†–ê–í–ö–ê –ñ–£–†–ù–ê–õ–ê –ö–û–ù–ï–¶ ========");[m
 }[m
 [m
[31m-/* ========= –û–¥–Ω–æ –∏–∑–º–µ—Ä–µ–Ω–∏–µ (DEBUG) ========= */[m
[31m-void App::transmitSingle(float value, const DateTime& dt) {[m
[31m-[m
[32m+[m[32mvoid App::transmitSingle(float value, const DateTime& dt)[m
[32m+[m[32m{[m
   if (readChannel() == LinkChannel::Eth) {[m
     DBG.error("ETH selected -> transmitSingle via GSM –∑–∞–ø—Ä–µ—â—ë–Ω, –ø—Ä–æ–ø—É—Å–∫");[m
     return;[m
[36m@@ -379,8 +492,8 @@[m [mvoid App::transmitSingle(float value, const DateTime& dt) {[m
 [m
   m_gsm.powerOn();[m
   if (m_gsm.init() == GsmStatus::Ok) {[m
[31m-    auto s = m_gsm.httpPost(Config::SERVER_URL, j, static_cast<uint16_t>(len));[m
[31m-    DBG.info("DEBUG HTTP: %d", s);[m
[32m+[m[32m    auto s = m_gsm.httpPost(Config::SERVER_URL, j, (uint16_t)len);[m
[32m+[m[32m    DBG.info("DEBUG HTTP: %d", (int)s);[m
     m_gsm.disconnect();[m
   } else {[m
     DBG.error("GSM init fail (DEBUG)");[m
[36m@@ -388,8 +501,8 @@[m [mvoid App::transmitSingle(float value, const DateTime& dt) {[m
   m_gsm.powerOff();[m
 }[m
 [m
[31m-/* ========= –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –±—ç–∫–∞–ø–∞ ========= */[m
[31m-void App::retransmitBackup() {[m
[32m+[m[32mvoid App::retransmitBackup()[m
[32m+[m[32m{[m
   LinkChannel ch = readChannel();[m
 [m
   while (m_sdBackup.exists()) {[m
[36m@@ -414,32 +527,34 @@[m [mvoid App::retransmitBackup() {[m
     int http = -1;[m
 [m
     if (ch == LinkChannel::Eth) {[m
[31m-      // ETH —Å—Ç—Ä–æ–≥–æ: —Ç–æ–ª—å–∫–æ Ethernet[m
[31m-      if (!ethLinkUp() || !eth.ready()) {[m
[31m-        DBG.error("ETH selected but not ready -> stop resend, keep journal");[m
[32m+[m[32m      if (!ensureEthReadyAndLinkUp()) {[m
[32m+[m[32m        DBG.error("ETH selected but not ready/link -> stop resend, keep journal");[m
         return;[m
       }[m
 [m
       if (startsWith(Config::SERVER_URL, "https://")) {[m
[31m-        http = HttpsW5500::postJson(Config::SERVER_URL,[m
[31m-                                    Config::SERVER_AUTH,[m
[31m-                                    m_json,[m
[31m-                                    (uint16_t)std::strlen(m_json),[m
[31m-                                    20000);[m
[32m+[m[32m        http = HttpsW5500::postJson([m
[32m+[m[32m          Config::SERVER_URL,[m
[32m+[m[32m          Config::SERVER_AUTH,[m
[32m+[m[32m          m_json,[m
[32m+[m[32m          (uint16_t)std::strlen(m_json),[m
[32m+[m[32m          20000[m
[32m+[m[32m        );[m
         DBG.info("ETH HTTPS: %d", http);[m
       } else if (startsWith(Config::SERVER_URL, "http://")) {[m
[31m-        http = httpPostPlainW5500(Config::SERVER_URL,[m
[31m-                                  Config::SERVER_AUTH,[m
[31m-                                  m_json,[m
[31m-                                  (uint16_t)std::strlen(m_json),[m
[31m-                                  15000);[m
[32m+[m[32m        http = httpPostPlainW5500([m
[32m+[m[32m          Config::SERVER_URL,[m
[32m+[m[32m          Config::SERVER_AUTH,[m
[32m+[m[32m          m_json,[m
[32m+[m[32m          (uint16_t)std::strlen(m_json),[m
[32m+[m[32m          15000[m
[32m+[m[32m        );[m
         DBG.info("ETH HTTP: %d", http);[m
       } else {[m
         DBG.error("Unsupported URL scheme in SERVER_URL");[m
         return;[m
       }[m
     } else {[m
[31m-      // GSM[m
       http = m_gsm.httpPost(Config::SERVER_URL, m_json, (uint16_t)std::strlen(m_json));[m
       DBG.info("GSM HTTP: %d", http);[m
     }[m
[1mdiff --git a/Core/Src/stm32f4xx_hal_msp.c b/Core/Src/stm32f4xx_hal_msp.c[m
[1mindex 8557e3c..473362c 100644[m
[1m--- a/Core/Src/stm32f4xx_hal_msp.c[m
[1m+++ b/Core/Src/stm32f4xx_hal_msp.c[m
[36m@@ -85,9 +85,9 @@[m [mvoid HAL_I2C_MspDeInit(I2C_HandleTypeDef *hi2c)[m
 }[m
 [m
 /*[m
[31m- * HAL_SD_MspInit / HAL_SD_MspDeInit –†–à–†‚Äù–†—í–†‚Ä∫–†‚Ä¢–†—ú–†¬´ –≤–Ç‚Äù[m
[31m- * SDIO –°–Ç–†¬∞–†¬±–†—ï–°‚Äö–†¬∞–†¬µ–°‚Äö –°‚Ä°–†¬µ–°–Ç–†¬µ–†¬∑ MMC HAL (HAL_MMC_MspInit –†–Ü sdio.c).[m
[31m- * –†‚Äù–†–Ü–†¬∞ –°–Ç–†¬∞–†¬∑–†–Ö–°‚Äπ–°‚Ä¶ MSP –†“ë–†¬ª–°–è –†—ï–†“ë–†–Ö–†—ï–†—ñ–†—ï –†—ó–†¬µ–°–Ç–†—ë–°‚Äû–†¬µ–°–Ç–†—ë–†‚Ññ–†–Ö–†—ï–†—ñ–†—ï –†¬±–†¬ª–†—ï–†—î–†¬∞ –†–Ü–°‚Äπ–†¬∑–†–Ü–†¬∞–†¬ª–†—ë –†¬±–°‚Äπ –†—î–†—ï–†–Ö–°‚Äû–†¬ª–†—ë–†—î–°‚Äö.[m
[32m+[m[32m * HAL_SD_MspInit / HAL_SD_MspDeInit –†¬†–†‚Ç¨–†¬†–≤–Ç—ú–†¬†–°‚Äô–†¬†–≤–Ç—î–†¬†–≤–Ç—û–†¬†–°—ö–†¬†–í¬´ –†–Ü–†‚Äö–≤–Ç—ú[m
[32m+[m[32m * SDIO –†–é–†‚Äö–†¬†–í¬∞–†¬†–í¬±–†¬†–°‚Ä¢–†–é–≤–Ç—ô–†¬†–í¬∞–†¬†–í¬µ–†–é–≤–Ç—ô –†–é–≤–Ç–é–†¬†–í¬µ–†–é–†‚Äö–†¬†–í¬µ–†¬†–í¬∑ MMC HAL (HAL_MMC_MspInit –†¬†–†‚Ä† sdio.c).[m
[32m+[m[32m * –†¬†–≤–Ç—ú–†¬†–†‚Ä†–†¬†–í¬∞ –†–é–†‚Äö–†¬†–í¬∞–†¬†–í¬∑–†¬†–†‚Ä¶–†–é–≤–Ç‚Ññ–†–é–≤–Ç¬¶ MSP –†¬†–¢‚Äò–†¬†–í¬ª–†–é–†–è –†¬†–°‚Ä¢–†¬†–¢‚Äò–†¬†–†‚Ä¶–†¬†–°‚Ä¢–†¬†–°‚Äì–†¬†–°‚Ä¢ –†¬†–°‚Äî–†¬†–í¬µ–†–é–†‚Äö–†¬†–°‚Äò–†–é–≤–Ç—õ–†¬†–í¬µ–†–é–†‚Äö–†¬†–°‚Äò–†¬†–≤‚Äû‚Äì–†¬†–†‚Ä¶–†¬†–°‚Ä¢–†¬†–°‚Äì–†¬†–°‚Ä¢ –†¬†–í¬±–†¬†–í¬ª–†¬†–°‚Ä¢–†¬†–°‚Äù–†¬†–í¬∞ –†¬†–†‚Ä†–†–é–≤–Ç‚Ññ–†¬†–í¬∑–†¬†–†‚Ä†–†¬†–í¬∞–†¬†–í¬ª–†¬†–°‚Äò –†¬†–í¬±–†–é–≤–Ç‚Ññ –†¬†–°‚Äù–†¬†–°‚Ä¢–†¬†–†‚Ä¶–†–é–≤–Ç—õ–†¬†–í¬ª–†¬†–°‚Äò–†¬†–°‚Äù–†–é–≤–Ç—ô.[m
  */[m
 [m
 /* ========= RTC MSP ========= */[m
[1mdiff --git a/Core/Src/w5500_net.cpp b/Core/Src/w5500_net.cpp[m
[1mindex dcaecc3..621388e 100644[m
[1m--- a/Core/Src/w5500_net.cpp[m
[1m+++ b/Core/Src/w5500_net.cpp[m
[36m@@ -13,7 +13,10 @@[m [mvoid W5500Net::dhcpCbConflict() { s_dhcpConflict = true; }[m
 void W5500Net::getNetInfo(wiz_NetInfo& out) const { out = m_info; }[m
 [m
 bool W5500Net::init(SPI_HandleTypeDef* hspi, uint32_t dhcpTimeoutMs) {[m
[31m-  m_ready = false;[m
[32m+[m	[32muint8_t ver = getVERSIONR();[m
[32m+[m	[32mDBG.info("W5500: VERSIONR=0x%02X", ver);[m
[32m+[m
[32m+[m	[32mm_ready = false;[m
   m_mode = Mode::Static;[m
   s_dhcpAssigned = false;[m
   s_dhcpConflict = false;[m
[1mdiff --git a/FATFS/Target/sd_diskio.c b/FATFS/Target/sd_diskio.c[m
[1mindex b10ef27..1394260 100644[m
[1m--- a/FATFS/Target/sd_diskio.c[m
[1m+++ b/FATFS/Target/sd_diskio.c[m
[36m@@ -255,3 +255,4 @@[m [mDRESULT SD_ioctl(BYTE lun, BYTE cmd, void *buff)[m
 /* USER CODE BEGIN lastSection */[m
 /* can be used to modify / undefine previous code or add new code */[m
 /* USER CODE END lastSection */[m
[41m+[m
[1mdiff --git a/FATFS/Target/user_diskio.c b/FATFS/Target/user_diskio.c[m
[1mindex 5641c5c..d7b99b5 100644[m
[1m--- a/FATFS/Target/user_diskio.c[m
[1m+++ b/FATFS/Target/user_diskio.c[m
[36m@@ -1,167 +1,241 @@[m
[31m-/* USER CODE BEGIN Header */[m
 /**[m
[31m- ******************************************************************************[m
[31m-  * @file    user_diskio.c[m
[31m-  * @brief   This file includes a diskio driver skeleton to be completed by the user.[m
[31m-  ******************************************************************************[m
[31m-  * @attention[m
[31m-  *[m
[31m-  * Copyright (c) 2026 STMicroelectronics.[m
[31m-  * All rights reserved.[m
[31m-  *[m
[31m-  * This software is licensed under terms that can be found in the LICENSE file[m
[31m-  * in the root directory of this software component.[m
[31m-  * If no LICENSE file comes with this software, it is provided AS-IS.[m
[31m-  *[m
[31m-  ******************************************************************************[m
[31m-  */[m
[31m- /* USER CODE END Header */[m
[31m-[m
[31m-#ifdef USE_OBSOLETE_USER_CODE_SECTION_0[m
[31m-/*[m
[31m- * Warning: the user section 0 is no more in use (starting from CubeMx version 4.16.0)[m
[31m- * To be suppressed in the future.[m
[31m- * Kept to ensure backward compatibility with previous CubeMx versions when[m
[31m- * migrating projects.[m
[31m- * User code previously added there should be copied in the new user sections before[m
[31m- * the section contents can be deleted.[m
[32m+[m[32m * @file    user_diskio.c[m
[32m+[m[32m * @brief   FatFS diskio —á–µ—Ä–µ–∑ HAL_SD + SDIO DMA (Stream3/Stream6).[m
[32m+[m[32m *          HAL_SD_ReadBlocks_DMA / HAL_SD_WriteBlocks_DMA.[m
  */[m
[31m-/* USER CODE BEGIN 0 */[m
[31m-/* USER CODE END 0 */[m
[31m-#endif[m
[31m-[m
[31m-/* USER CODE BEGIN DECL */[m
 [m
[31m-/* Includes ------------------------------------------------------------------*/[m
 #include <string.h>[m
[32m+[m[32m#include <stdio.h>[m
[32m+[m[32m#include <stdarg.h>[m
 #include "ff_gen_drv.h"[m
[32m+[m[32m#include "stm32f4xx_hal_sd.h"[m
[32m+[m[32m#include "stm32f4xx_hal_uart.h"[m
[32m+[m
[32m+[m[32mextern SD_HandleTypeDef   hsd;[m
[32m+[m[32mextern UART_HandleTypeDef huart1;[m
 [m
[31m-/* Private typedef -----------------------------------------------------------*/[m
[31m-/* Private define ------------------------------------------------------------*/[m
[32m+[m[32m#define SD_TIMEOUT_MS  5000U[m
 [m
[31m-/* Private variables ---------------------------------------------------------*/[m
[31m-/* Disk status */[m
 static volatile DSTATUS Stat = STA_NOINIT;[m
 [m
[31m-/* USER CODE END DECL */[m
[32m+[m[32m/* -------------------------------------------------------[m
[32m+[m[32m *  C-–ª–æ–≥–≥–µ—Ä (–±–µ–∑ C++ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤)[m
[32m+[m[32m * ------------------------------------------------------- */[m
[32m+[m[32mstatic void diskio_log(const char *fmt, ...)[m
[32m+[m[32m{[m
[32m+[m[32m    char buf[128];[m
[32m+[m[32m    va_list args;[m
[32m+[m[32m    va_start(args, fmt);[m
[32m+[m[32m    int len = vsnprintf(buf, sizeof(buf), fmt, args);[m
[32m+[m[32m    va_end(args);[m
[32m+[m[32m    if (len > 0) {[m
[32m+[m[32m        HAL_UART_Transmit(&huart1, (uint8_t*)buf, (uint16_t)len, 200);[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
 [m
[31m-/* Private function prototypes -----------------------------------------------*/[m
[31m-DSTATUS USER_initialize (BYTE pdrv);[m
[31m-DSTATUS USER_status (BYTE pdrv);[m
[31m-DRESULT USER_read (BYTE pdrv, BYTE *buff, DWORD sector, UINT count);[m
[32m+[m[32m/* ---- –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã ---- */[m
[32m+[m[32mDSTATUS USER_initialize(BYTE pdrv);[m
[32m+[m[32mDSTATUS USER_status    (BYTE pdrv);[m
[32m+[m[32mDRESULT USER_read      (BYTE pdrv, BYTE *buff, DWORD sector, UINT count);[m
 #if _USE_WRITE == 1[m
[31m-  DRESULT USER_write (BYTE pdrv, const BYTE *buff, DWORD sector, UINT count);[m
[31m-#endif /* _USE_WRITE == 1 */[m
[32m+[m[32mDRESULT USER_write     (BYTE pdrv, const BYTE *buff, DWORD sector, UINT count);[m
[32m+[m[32m#endif[m
 #if _USE_IOCTL == 1[m
[31m-  DRESULT USER_ioctl (BYTE pdrv, BYTE cmd, void *buff);[m
[31m-#endif /* _USE_IOCTL == 1 */[m
[32m+[m[32mDRESULT USER_ioctl     (BYTE pdrv, BYTE cmd, void *buff);[m
[32m+[m[32m#endif[m
 [m
[31m-Diskio_drvTypeDef  USER_Driver =[m
[31m-{[m
[31m-  USER_initialize,[m
[31m-  USER_status,[m
[31m-  USER_read,[m
[31m-#if  _USE_WRITE[m
[31m-  USER_write,[m
[31m-#endif  /* _USE_WRITE == 1 */[m
[31m-#if  _USE_IOCTL == 1[m
[31m-  USER_ioctl,[m
[31m-#endif /* _USE_IOCTL == 1 */[m
[32m+[m[32mDiskio_drvTypeDef USER_Driver = {[m
[32m+[m[32m    USER_initialize,[m
[32m+[m[32m    USER_status,[m
[32m+[m[32m    USER_read,[m
[32m+[m[32m#if _USE_WRITE[m
[32m+[m[32m    USER_write,[m
[32m+[m[32m#endif[m
[32m+[m[32m#if _USE_IOCTL == 1[m
[32m+[m[32m    USER_ioctl,[m
[32m+[m[32m#endif[m
 };[m
 [m
[31m-/* Private functions ---------------------------------------------------------*/[m
[32m+[m[32m/* =============================================================[m
[32m+[m[32m *  sd_wait_ready ‚Äî –∂–¥—ë–º TRANSFER state (–∫–∞—Ä—Ç–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∫–æ–º–∞–Ω–¥–µ)[m
[32m+[m[32m * ============================================================= */[m
[32m+[m[32mstatic uint8_t sd_wait_ready(void)[m
[32m+[m[32m{[m
[32m+[m[32m    uint32_t tick = HAL_GetTick();[m
[32m+[m[32m    while (HAL_GetTick() - tick < SD_TIMEOUT_MS) {[m
[32m+[m[32m        if (HAL_SD_GetCardState(&hsd) == HAL_SD_CARD_TRANSFER) {[m
[32m+[m[32m            return 1;[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m    diskio_log("[DISKIO] sd_wait_ready: TIMEOUT\r\n");[m
[32m+[m[32m    return 0;[m
[32m+[m[32m}[m
 [m
[31m-/**[m
[31m-  * @brief  Initializes a Drive[m
[31m-  * @param  pdrv: Physical drive number (0..)[m
[31m-  * @retval DSTATUS: Operation status[m
[31m-  */[m
[31m-DSTATUS USER_initialize ([m
[31m-	BYTE pdrv           /* Physical drive nmuber to identify the drive */[m
[31m-)[m
[32m+[m[32m/* =============================================================[m
[32m+[m[32m *  USER_initialize[m
[32m+[m[32m * ============================================================= */[m
[32m+[m[32mDSTATUS USER_initialize(BYTE pdrv)[m
 {[m
[31m-  /* USER CODE BEGIN INIT */[m
[31m-    Stat = STA_NOINIT;[m
[32m+[m[32m    if (pdrv != 0) {[m
[32m+[m[32m        diskio_log("[DISKIO] init: wrong pdrv=%u\r\n", pdrv);[m
[32m+[m[32m        return STA_NOINIT;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    HAL_SD_CardStateTypeDef state = HAL_SD_GetCardState(&hsd);[m
[32m+[m[32m    diskio_log("[DISKIO] init: cardState=%d\r\n", (int)state);[m
[32m+[m
[32m+[m[32m    Stat = (state == HAL_SD_CARD_TRANSFER) ? 0 : STA_NOINIT;[m
[32m+[m[32m    diskio_log("[DISKIO] init: Stat=0x%02X\r\n", Stat);[m
     return Stat;[m
[31m-  /* USER CODE END INIT */[m
 }[m
 [m
[31m-/**[m
[31m-  * @brief  Gets Disk Status[m
[31m-  * @param  pdrv: Physical drive number (0..)[m
[31m-  * @retval DSTATUS: Operation status[m
[31m-  */[m
[31m-DSTATUS USER_status ([m
[31m-	BYTE pdrv       /* Physical drive number to identify the drive */[m
[31m-)[m
[32m+[m[32m/* =============================================================[m
[32m+[m[32m *  USER_status[m
[32m+[m[32m * ============================================================= */[m
[32m+[m[32mDSTATUS USER_status(BYTE pdrv)[m
 {[m
[31m-  /* USER CODE BEGIN STATUS */[m
[31m-    Stat = STA_NOINIT;[m
[32m+[m[32m    if (pdrv != 0) return STA_NOINIT;[m
[32m+[m[32m    Stat = (HAL_SD_GetCardState(&hsd) == HAL_SD_CARD_TRANSFER) ? 0 : STA_NOINIT;[m
     return Stat;[m
[31m-  /* USER CODE END STATUS */[m
 }[m
 [m
[31m-/**[m
[31m-  * @brief  Reads Sector(s)[m
[31m-  * @param  pdrv: Physical drive number (0..)[m
[31m-  * @param  *buff: Data buffer to store read data[m
[31m-  * @param  sector: Sector address (LBA)[m
[31m-  * @param  count: Number of sectors to read (1..128)[m
[31m-  * @retval DRESULT: Operation result[m
[31m-  */[m
[31m-DRESULT USER_read ([m
[31m-	BYTE pdrv,      /* Physical drive nmuber to identify the drive */[m
[31m-	BYTE *buff,     /* Data buffer to store read data */[m
[31m-	DWORD sector,   /* Sector address in LBA */[m
[31m-	UINT count      /* Number of sectors to read */[m
[31m-)[m
[32m+[m[32m/* =============================================================[m
[32m+[m[32m *  USER_read ‚Äî DMA-—á—Ç–µ–Ω–∏–µ[m
[32m+[m[32m *  –ë—É—Ñ–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—Ä–æ–≤–Ω–µ–Ω –ø–æ 4 –±–∞–π—Ç–∞–º (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ DMA).[m
[32m+[m[32m *  –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —á–∏—Ç–∞–µ–º –ø–æ—Å–µ–∫—Ç–æ—Ä–Ω–æ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π aligned-–±—É—Ñ–µ—Ä.[m
[32m+[m[32m * ============================================================= */[m
[32m+[m[32mDRESULT USER_read(BYTE pdrv, BYTE *buff, DWORD sector, UINT count)[m
 {[m
[31m-  /* USER CODE BEGIN READ */[m
[32m+[m[32m    diskio_log("[DISKIO] read: sec=%lu cnt=%u\r\n",[m
[32m+[m[32m               (unsigned long)sector, count);[m
[32m+[m
[32m+[m[32m    if (pdrv != 0 || count == 0) return RES_PARERR;[m
[32m+[m[32m    if (Stat & STA_NOINIT)       return RES_NOTRDY;[m
[32m+[m
[32m+[m[32m    /* –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–π –±—É—Ñ–µ—Ä –¥–ª—è DMA (512 –±–∞–π—Ç, 4-byte aligned) */[m
[32m+[m[32m    static uint32_t aligned[512 / 4];[m
[32m+[m
[32m+[m[32m    if ((uint32_t)buff % 4 != 0) {[m
[32m+[m[32m        /* –ù–µ–≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–π ‚Äî —á–∏—Ç–∞–µ–º –ø–æ—Å–µ–∫—Ç–æ—Ä–Ω–æ —á–µ—Ä–µ–∑ aligned */[m
[32m+[m[32m        for (UINT i = 0; i < count; i++) {[m
[32m+[m[32m            if (!sd_wait_ready()) return RES_ERROR;[m
[32m+[m
[32m+[m[32m            if (HAL_SD_ReadBlocks_DMA(&hsd, (uint8_t*)aligned,[m
[32m+[m[32m                                      sector + i, 1) != HAL_OK) {[m
[32m+[m[32m                diskio_log("[DISKIO] read DMA err=0x%08lX (unaligned)\r\n",[m
[32m+[m[32m                           HAL_SD_GetError(&hsd));[m
[32m+[m[32m                return RES_ERROR;[m
[32m+[m[32m            }[m
[32m+[m[32m            /* –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è DMA ‚Äî –∫–∞—Ä—Ç–∞ –≤–µ—Ä–Ω—ë—Ç—Å—è –≤ TRANSFER */[m
[32m+[m[32m            uint32_t tick = HAL_GetTick();[m
[32m+[m[32m            while (HAL_SD_GetCardState(&hsd) != HAL_SD_CARD_TRANSFER) {[m
[32m+[m[32m                if (HAL_GetTick() - tick > SD_TIMEOUT_MS) {[m
[32m+[m[32m                    diskio_log("[DISKIO] read DMA wait timeout (unaligned)\r\n");[m
[32m+[m[32m                    return RES_ERROR;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m            memcpy(buff + i * 512, aligned, 512);[m
[32m+[m[32m        }[m
[32m+[m[32m    } else {[m
[32m+[m[32m        /* –í—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–π ‚Äî —á–∏—Ç–∞–µ–º –≤—Å—ë –æ–¥–Ω–∏–º DMA-–≤—ã–∑–æ–≤–æ–º */[m
[32m+[m[32m        if (!sd_wait_ready()) return RES_ERROR;[m
[32m+[m
[32m+[m[32m        if (HAL_SD_ReadBlocks_DMA(&hsd, buff, sector, count) != HAL_OK) {[m
[32m+[m[32m            diskio_log("[DISKIO] read DMA err=0x%08lX\r\n",[m
[32m+[m[32m                       HAL_SD_GetError(&hsd));[m
[32m+[m[32m            return RES_ERROR;[m
[32m+[m[32m        }[m
[32m+[m[32m        uint32_t tick = HAL_GetTick();[m
[32m+[m[32m        while (HAL_SD_GetCardState(&hsd) != HAL_SD_CARD_TRANSFER) {[m
[32m+[m[32m            if (HAL_GetTick() - tick > SD_TIMEOUT_MS) {[m
[32m+[m[32m                diskio_log("[DISKIO] read DMA wait timeout\r\n");[m
[32m+[m[32m                return RES_ERROR;[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    diskio_log("[DISKIO] read: OK\r\n");[m
     return RES_OK;[m
[31m-  /* USER CODE END READ */[m
 }[m
 [m
[31m-/**[m
[31m-  * @brief  Writes Sector(s)[m
[31m-  * @param  pdrv: Physical drive number (0..)[m
[31m-  * @param  *buff: Data to be written[m
[31m-  * @param  sector: Sector address (LBA)[m
[31m-  * @param  count: Number of sectors to write (1..128)[m
[31m-  * @retval DRESULT: Operation result[m
[31m-  */[m
[32m+[m[32m/* =============================================================[m
[32m+[m[32m *  USER_write ‚Äî DMA-–∑–∞–ø–∏—Å—å[m
[32m+[m[32m * ============================================================= */[m
 #if _USE_WRITE == 1[m
[31m-DRESULT USER_write ([m
[31m-	BYTE pdrv,          /* Physical drive nmuber to identify the drive */[m
[31m-	const BYTE *buff,   /* Data to be written */[m
[31m-	DWORD sector,       /* Sector address in LBA */[m
[31m-	UINT count          /* Number of sectors to write */[m
[31m-)[m
[32m+[m[32mDRESULT USER_write(BYTE pdrv, const BYTE *buff, DWORD sector, UINT count)[m
 {[m
[31m-  /* USER CODE BEGIN WRITE */[m
[31m-  /* USER CODE HERE */[m
[32m+[m[32m    if (pdrv != 0 || count == 0) return RES_PARERR;[m
[32m+[m[32m    if (Stat & STA_NOINIT)       return RES_NOTRDY;[m
[32m+[m
[32m+[m[32m    static uint32_t aligned[512 / 4];[m
[32m+[m
[32m+[m[32m    if ((uint32_t)buff % 4 != 0) {[m
[32m+[m[32m        for (UINT i = 0; i < count; i++) {[m
[32m+[m[32m            memcpy(aligned, buff + i * 512, 512);[m
[32m+[m[32m            if (!sd_wait_ready()) return RES_ERROR;[m
[32m+[m
[32m+[m[32m            if (HAL_SD_WriteBlocks_DMA(&hsd, (uint8_t*)aligned,[m
[32m+[m[32m                                       sector + i, 1) != HAL_OK)[m
[32m+[m[32m                return RES_ERROR;[m
[32m+[m
[32m+[m[32m            uint32_t tick = HAL_GetTick();[m
[32m+[m[32m            while (HAL_SD_GetCardState(&hsd) != HAL_SD_CARD_TRANSFER) {[m
[32m+[m[32m                if (HAL_GetTick() - tick > SD_TIMEOUT_MS) return RES_ERROR;[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    } else {[m
[32m+[m[32m        if (!sd_wait_ready()) return RES_ERROR;[m
[32m+[m
[32m+[m[32m        if (HAL_SD_WriteBlocks_DMA(&hsd, (uint8_t*)buff,[m
[32m+[m[32m                                   sector, count) != HAL_OK)[m
[32m+[m[32m            return RES_ERROR;[m
[32m+[m
[32m+[m[32m        uint32_t tick = HAL_GetTick();[m
[32m+[m[32m        while (HAL_SD_GetCardState(&hsd) != HAL_SD_CARD_TRANSFER) {[m
[32m+[m[32m            if (HAL_GetTick() - tick > SD_TIMEOUT_MS) return RES_ERROR;[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
     return RES_OK;[m
[31m-  /* USER CODE END WRITE */[m
 }[m
 #endif /* _USE_WRITE == 1 */[m
 [m
[31m-/**[m
[31m-  * @brief  I/O control operation[m
[31m-  * @param  pdrv: Physical drive number (0..)[m
[31m-  * @param  cmd: Control code[m
[31m-  * @param  *buff: Buffer to send/receive control data[m
[31m-  * @retval DRESULT: Operation result[m
[31m-  */[m
[32m+[m[32m/* =============================================================[m
[32m+[m[32m *  USER_ioctl[m
[32m+[m[32m * ============================================================= */[m
 #if _USE_IOCTL == 1[m
[31m-DRESULT USER_ioctl ([m
[31m-	BYTE pdrv,      /* Physical drive nmuber (0..) */[m
[31m-	BYTE cmd,       /* Control code */[m
[31m-	void *buff      /* Buffer to send/receive control data */[m
[31m-)[m
[32m+[m[32mDRESULT USER_ioctl(BYTE pdrv, BYTE cmd, void *buff)[m
 {[m
[31m-  /* USER CODE BEGIN IOCTL */[m
[32m+[m[32m    if (pdrv != 0)         return RES_PARERR;[m
[32m+[m[32m    if (Stat & STA_NOINIT) return RES_NOTRDY;[m
[32m+[m
[32m+[m[32m    HAL_SD_CardInfoTypeDef info;[m
     DRESULT res = RES_ERROR;[m
[32m+[m
[32m+[m[32m    switch (cmd) {[m
[32m+[m[32m    case CTRL_SYNC:[m
[32m+[m[32m        res = sd_wait_ready() ? RES_OK : RES_ERROR;[m
[32m+[m[32m        break;[m
[32m+[m[32m    case GET_SECTOR_COUNT:[m
[32m+[m[32m        if (HAL_SD_GetCardInfo(&hsd, &info) == HAL_OK) {[m
[32m+[m[32m            *(DWORD*)buff = info.LogBlockNbr;[m
[32m+[m[32m            res = RES_OK;[m
[32m+[m[32m        }[m
[32m+[m[32m        break;[m
[32m+[m[32m    case GET_SECTOR_SIZE:[m
[32m+[m[32m        *(WORD*)buff = 512;[m
[32m+[m[32m        res = RES_OK;[m
[32m+[m[32m        break;[m
[32m+[m[32m    case GET_BLOCK_SIZE:[m
[32m+[m[32m        if (HAL_SD_GetCardInfo(&hsd, &info) == HAL_OK) {[m
[32m+[m[32m            *(DWORD*)buff = info.LogBlockSize / 512;[m
[32m+[m[32m            res = RES_OK;[m
[32m+[m[32m        }[m
[32m+[m[32m        break;[m
[32m+[m[32m    default:[m
[32m+[m[32m        res = RES_PARERR;[m
[32m+[m[32m        break;[m
[32m+[m[32m    }[m
     return res;[m
[31m-  /* USER CODE END IOCTL */[m
 }[m
 #endif /* _USE_IOCTL == 1 */[m
 [m
